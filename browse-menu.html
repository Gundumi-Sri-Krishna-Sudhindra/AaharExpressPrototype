<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Browse Menu - AaharExpress</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="dashboard.css">
    <link rel="stylesheet" href="feature-pages.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-utensils"></i>
                <span>AaharExpress</span>
            </div>
            <div class="nav-menu">
                <a href="dashboard.html" class="nav-link">Dashboard</a>
                <a href="#menu" class="nav-link active">Browse Menu</a>
                <a href="#cart" class="nav-link">Cart</a>
                <a href="#profile" class="nav-link">Profile</a>
            </div>
            <div class="nav-actions">
                <div class="user-info">
                    <span>User / Donor</span>
                    <span>Rahul Sharma</span>
                </div>
                <button class="btn-secondary" onclick="goToDashboard()">
                    <i class="fas fa-arrow-left"></i>
                    Back to Dashboard
                </button>
            </div>
        </div>
    </nav>

    <!-- Feature Page Content -->
    <div class="feature-container">
        <!-- Feature Header -->
        <header class="feature-header">
            <div class="feature-header-content">
                <h1>Browse Food Menu</h1>
                <p>Explore delicious meals from our partner restaurants and place orders</p>
            </div>
            <div class="feature-header-actions">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search for food items..." id="searchInput">
                </div>
                <div class="filter-buttons">
                    <button class="btn-outline active" data-filter="all">All</button>
                    <button class="btn-outline" data-filter="veg">Vegetarian</button>
                    <button class="btn-outline" data-filter="non-veg">Non-Vegetarian</button>
                    <button class="btn-outline" data-filter="surplus">Surplus Food</button>
                </div>
            </div>
        </header>

        <!-- Restaurant Categories -->
        <section class="restaurant-categories">
            <h2>Restaurant Categories</h2>
            <div class="category-grid">
                <div class="category-card active" data-category="all">
                    <i class="fas fa-utensils"></i>
                    <span>All Restaurants</span>
                </div>
                <div class="category-card" data-category="indian">
                    <i class="fas fa-pepper-hot"></i>
                    <span>Indian</span>
                </div>
                <div class="category-card" data-category="chinese">
                    <i class="fas fa-dragon"></i>
                    <span>Chinese</span>
                </div>
                <div class="category-card" data-category="italian">
                    <i class="fas fa-pizza-slice"></i>
                    <span>Italian</span>
                </div>
                <div class="category-card" data-category="fast-food">
                    <i class="fas fa-hamburger"></i>
                    <span>Fast Food</span>
                </div>
                <div class="category-card" data-category="desserts">
                    <i class="fas fa-ice-cream"></i>
                    <span>Desserts</span>
                </div>
            </div>
        </section>

        <!-- Menu Items Grid -->
        <section class="menu-section">
            <div class="menu-header">
                <h2>Available Menu Items</h2>
                <div class="menu-sort">
                    <select id="sortSelect">
                        <option value="popular">Most Popular</option>
                        <option value="price-low">Price: Low to High</option>
                        <option value="price-high">Price: High to Low</option>
                        <option value="rating">Highest Rated</option>
                    </select>
                </div>
            </div>
            
            <div class="menu-grid" id="menuGrid">
                <!-- Menu items will be populated by JavaScript -->
            </div>
        </section>

        <!-- Cart Sidebar -->
        <aside class="cart-sidebar" id="cartSidebar">
            <div class="cart-header">
                <h3>Shopping Cart</h3>
                <button class="cart-close" onclick="toggleCart()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="cart-items" id="cartItems">
                <!-- Cart items will be populated by JavaScript -->
            </div>
            <div class="cart-footer">
                <div class="cart-total">
                    <span>Total:</span>
                    <span id="cartTotal">₹0</span>
                </div>
                <button class="btn-primary btn-full" onclick="checkout()">
                    <i class="fas fa-shopping-cart"></i>
                    Checkout
                </button>
            </div>
        </aside>

        <!-- Cart Toggle Button -->
        <button class="cart-toggle" onclick="toggleCart()">
            <i class="fas fa-shopping-cart"></i>
            <span id="cartCount">0</span>
        </button>
    </div>

    <!-- Menu Item Modal -->
    <div id="menuItemModal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2 id="modalItemName">Item Name</h2>
                <button class="modal-close" onclick="closeMenuItemModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="menu-item-details">
                    <div class="item-image">
                        <img id="modalItemImage" src="" alt="Food Item">
                    </div>
                    <div class="item-info">
                        <div class="item-description">
                            <p id="modalItemDescription">Item description goes here...</p>
                        </div>
                        <div class="item-ingredients">
                            <h4>Ingredients:</h4>
                            <ul id="modalItemIngredients">
                                <!-- Ingredients will be populated -->
                            </ul>
                        </div>
                        <div class="item-nutrition">
                            <h4>Nutrition Info:</h4>
                            <div class="nutrition-grid" id="modalItemNutrition">
                                <!-- Nutrition info will be populated -->
                            </div>
                        </div>
                        <div class="item-actions">
                            <div class="quantity-selector">
                                <button onclick="decreaseQuantity()">-</button>
                                <span id="itemQuantity">1</span>
                                <button onclick="increaseQuantity()">+</button>
                            </div>
                            <div class="item-price">
                                <span id="modalItemPrice">₹0</span>
                            </div>
                            <button class="btn-primary" onclick="addToCartFromModal()">
                                <i class="fas fa-plus"></i>
                                Add to Cart
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample menu data
        const menuItems = [
            {
                id: 1,
                name: 'Chicken Biryani',
                description: 'Aromatic basmati rice cooked with tender chicken and aromatic spices',
                price: 250,
                category: 'indian',
                type: 'non-veg',
                image: 'https://via.placeholder.com/300x200/ff8f00/ffffff?text=Biryani',
                restaurant: 'Spice Garden',
                rating: 4.5,
                popular: true,
                ingredients: ['Basmati Rice', 'Chicken', 'Onions', 'Tomatoes', 'Spices', 'Ghee'],
                nutrition: {
                    calories: 450,
                    protein: 25,
                    carbs: 65,
                    fat: 12
                }
            },
            {
                id: 2,
                name: 'Paneer Butter Masala',
                description: 'Cottage cheese cubes in rich, creamy tomato-based gravy',
                price: 180,
                category: 'indian',
                type: 'veg',
                image: 'https://via.placeholder.com/300x200/4caf50/ffffff?text=Paneer',
                restaurant: 'Spice Garden',
                rating: 4.3,
                popular: true,
                ingredients: ['Paneer', 'Tomatoes', 'Cream', 'Butter', 'Spices'],
                nutrition: {
                    calories: 320,
                    protein: 15,
                    carbs: 8,
                    fat: 28
                }
            },
            {
                id: 3,
                name: 'Surplus Rice',
                description: 'Freshly cooked rice available for donation',
                price: 50,
                category: 'indian',
                type: 'veg',
                image: 'https://via.placeholder.com/300x200/ffc107/ffffff?text=Surplus',
                restaurant: 'Spice Garden',
                rating: 4.0,
                popular: false,
                surplus: true,
                ingredients: ['Basmati Rice', 'Water', 'Salt'],
                nutrition: {
                    calories: 200,
                    protein: 4,
                    carbs: 45,
                    fat: 0
                }
            },
            {
                id: 4,
                name: 'Chicken Fried Rice',
                description: 'Stir-fried rice with chicken, vegetables, and soy sauce',
                price: 200,
                category: 'chinese',
                type: 'non-veg',
                image: 'https://via.placeholder.com/300x200/2196f3/ffffff?text=Fried+Rice',
                restaurant: 'Golden Dragon',
                rating: 4.2,
                popular: true,
                ingredients: ['Rice', 'Chicken', 'Vegetables', 'Soy Sauce', 'Eggs'],
                nutrition: {
                    calories: 380,
                    protein: 20,
                    carbs: 55,
                    fat: 10
                }
            },
            {
                id: 5,
                name: 'Margherita Pizza',
                description: 'Classic pizza with tomato sauce, mozzarella, and basil',
                price: 300,
                category: 'italian',
                type: 'veg',
                image: 'https://via.placeholder.com/300x200/e91e63/ffffff?text=Pizza',
                restaurant: 'Pizza Palace',
                rating: 4.4,
                popular: true,
                ingredients: ['Pizza Dough', 'Tomato Sauce', 'Mozzarella', 'Basil'],
                nutrition: {
                    calories: 280,
                    protein: 12,
                    carbs: 35,
                    fat: 10
                }
            },
            {
                id: 6,
                name: 'Surplus Bread',
                description: 'Fresh bread available for donation',
                price: 30,
                category: 'fast-food',
                type: 'veg',
                image: 'https://via.placeholder.com/300x200/9c27b0/ffffff?text=Bread',
                restaurant: 'Bakery Corner',
                rating: 4.1,
                popular: false,
                surplus: true,
                ingredients: ['Flour', 'Yeast', 'Water', 'Salt'],
                nutrition: {
                    calories: 150,
                    protein: 5,
                    carbs: 30,
                    fat: 1
                }
            }
        ];

        let cart = [];
        let currentFilter = 'all';
        let currentCategory = 'all';

        // Initialize page
        function initializePage() {
            populateMenuGrid();
            setupEventListeners();
        }

        // Populate menu grid
        function populateMenuGrid() {
            const menuGrid = document.getElementById('menuGrid');
            const filteredItems = filterMenuItems();
            
            menuGrid.innerHTML = filteredItems.map(item => `
                <div class="menu-item" data-id="${item.id}">
                    <div class="menu-item-image">
                        <img src="${item.image}" alt="${item.name}">
                        ${item.surplus ? '<span class="surplus-badge">Surplus</span>' : ''}
                        ${item.popular ? '<span class="popular-badge">Popular</span>' : ''}
                    </div>
                    <div class="menu-item-content">
                        <div class="menu-item-header">
                            <h3>${item.name}</h3>
                            <div class="menu-item-rating">
                                <i class="fas fa-star"></i>
                                <span>${item.rating}</span>
                            </div>
                        </div>
                        <p class="menu-item-description">${item.description}</p>
                        <div class="menu-item-footer">
                            <div class="menu-item-price">₹${item.price}</div>
                            <div class="menu-item-restaurant">${item.restaurant}</div>
                        </div>
                        <button class="btn-primary btn-sm" onclick="viewMenuItem(${item.id})">
                            <i class="fas fa-eye"></i>
                            View Details
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Filter menu items
        function filterMenuItems() {
            return menuItems.filter(item => {
                const matchesFilter = currentFilter === 'all' || item.type === currentFilter;
                const matchesCategory = currentCategory === 'all' || item.category === currentCategory;
                return matchesFilter && matchesCategory;
            });
        }

        // Setup event listeners
        function setupEventListeners() {
            // Filter buttons
            document.querySelectorAll('[data-filter]').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('[data-filter]').forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    currentFilter = this.getAttribute('data-filter');
                    populateMenuGrid();
                });
            });

            // Category cards
            document.querySelectorAll('[data-category]').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('[data-category]').forEach(c => c.classList.remove('active'));
                    this.classList.add('active');
                    currentCategory = this.getAttribute('data-category');
                    populateMenuGrid();
                });
            });

            // Search input
            document.getElementById('searchInput').addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                const menuItems = document.querySelectorAll('.menu-item');
                
                menuItems.forEach(item => {
                    const itemName = item.querySelector('h3').textContent.toLowerCase();
                    const itemDescription = item.querySelector('.menu-item-description').textContent.toLowerCase();
                    
                    if (itemName.includes(searchTerm) || itemDescription.includes(searchTerm)) {
                        item.style.display = 'block';
                    } else {
                        item.style.display = 'none';
                    }
                });
            });

            // Sort select
            document.getElementById('sortSelect').addEventListener('change', function() {
                const sortBy = this.value;
                const menuGrid = document.getElementById('menuGrid');
                const items = Array.from(menuGrid.children);
                
                items.sort((a, b) => {
                    const aPrice = parseInt(a.querySelector('.menu-item-price').textContent.replace('₹', ''));
                    const bPrice = parseInt(b.querySelector('.menu-item-price').textContent.replace('₹', ''));
                    const aRating = parseFloat(a.querySelector('.menu-item-rating span').textContent);
                    const bRating = parseFloat(b.querySelector('.menu-item-rating span').textContent);
                    
                    switch(sortBy) {
                        case 'price-low':
                            return aPrice - bPrice;
                        case 'price-high':
                            return bPrice - aPrice;
                        case 'rating':
                            return bRating - aRating;
                        default:
                            return 0;
                    }
                });
                
                items.forEach(item => menuGrid.appendChild(item));
            });
        }

        // View menu item details
        function viewMenuItem(itemId) {
            const item = menuItems.find(item => item.id === itemId);
            if (!item) return;
            
            document.getElementById('modalItemName').textContent = item.name;
            document.getElementById('modalItemImage').src = item.image;
            document.getElementById('modalItemDescription').textContent = item.description;
            document.getElementById('modalItemPrice').textContent = `₹${item.price}`;
            document.getElementById('itemQuantity').textContent = '1';
            
            // Populate ingredients
            const ingredientsList = document.getElementById('modalItemIngredients');
            ingredientsList.innerHTML = item.ingredients.map(ingredient => 
                `<li>${ingredient}</li>`
            ).join('');
            
            // Populate nutrition
            const nutritionGrid = document.getElementById('modalItemNutrition');
            nutritionGrid.innerHTML = `
                <div class="nutrition-item">
                    <span>Calories</span>
                    <span>${item.nutrition.calories}</span>
                </div>
                <div class="nutrition-item">
                    <span>Protein</span>
                    <span>${item.nutrition.protein}g</span>
                </div>
                <div class="nutrition-item">
                    <span>Carbs</span>
                    <span>${item.nutrition.carbs}g</span>
                </div>
                <div class="nutrition-item">
                    <span>Fat</span>
                    <span>${item.nutrition.fat}g</span>
                </div>
            `;
            
            document.getElementById('menuItemModal').style.display = 'flex';
        }

        // Close menu item modal
        function closeMenuItemModal() {
            document.getElementById('menuItemModal').style.display = 'none';
        }

        // Quantity controls
        function increaseQuantity() {
            const quantityElement = document.getElementById('itemQuantity');
            let quantity = parseInt(quantityElement.textContent);
            quantityElement.textContent = quantity + 1;
        }

        function decreaseQuantity() {
            const quantityElement = document.getElementById('itemQuantity');
            let quantity = parseInt(quantityElement.textContent);
            if (quantity > 1) {
                quantityElement.textContent = quantity - 1;
            }
        }

        // Add to cart from modal
        function addToCartFromModal() {
            const itemName = document.getElementById('modalItemName').textContent;
            const itemPrice = parseInt(document.getElementById('modalItemPrice').textContent.replace('₹', ''));
            const quantity = parseInt(document.getElementById('itemQuantity').textContent);
            
            addToCart({
                name: itemName,
                price: itemPrice,
                quantity: quantity
            });
            
            closeMenuItemModal();
        }

        // Add to cart
        function addToCart(item) {
            const existingItem = cart.find(cartItem => cartItem.name === item.name);
            
            if (existingItem) {
                existingItem.quantity += item.quantity;
            } else {
                cart.push(item);
            }
            
            updateCart();
        }

        // Update cart display
        function updateCart() {
            const cartItems = document.getElementById('cartItems');
            const cartCount = document.getElementById('cartCount');
            const cartTotal = document.getElementById('cartTotal');
            
            cartCount.textContent = cart.reduce((total, item) => total + item.quantity, 0);
            
            cartItems.innerHTML = cart.map(item => `
                <div class="cart-item">
                    <div class="cart-item-info">
                        <h4>${item.name}</h4>
                        <p>₹${item.price} x ${item.quantity}</p>
                    </div>
                    <div class="cart-item-actions">
                        <button onclick="removeFromCart('${item.name}')">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            `).join('');
            
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            cartTotal.textContent = `₹${total}`;
        }

        // Remove from cart
        function removeFromCart(itemName) {
            cart = cart.filter(item => item.name !== itemName);
            updateCart();
        }

        // Toggle cart sidebar
        function toggleCart() {
            const cartSidebar = document.getElementById('cartSidebar');
            cartSidebar.classList.toggle('active');
        }

        // Checkout
        function checkout() {
            if (cart.length === 0) {
                alert('Your cart is empty!');
                return;
            }
            
            alert('Proceeding to checkout... This would redirect to a checkout page in a real application.');
        }

        // Go back to dashboard
        function goToDashboard() {
            window.location.href = 'dashboard.html?role=user';
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
            }
        }

        // Initialize page when loaded
        document.addEventListener('DOMContentLoaded', initializePage);
    </script>
</body>
</html> 